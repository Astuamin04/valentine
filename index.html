<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Be My Valentine ðŸ’˜</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<style>
  :root{
    --bg1:#ff6f91; --bg2:#ff9eb5; --bg3:#ffd1dc; --ink:#7a0b2e;
  }
  *{ box-sizing:border-box }
  body{
    margin:0; height:100vh; overflow:hidden; display:grid; place-items:center;
    background: linear-gradient(120deg, var(--bg1), var(--bg2), var(--bg3));
    background-size: 200% 200%;
    animation: bgMove 14s ease infinite;
    font-family: system-ui, -apple-system, Segoe UI, sans-serif;
    transition: background .4s ease;
  }
  body.night{
    --bg1:#0b1026; --bg2:#141b3a; --bg3:#1f2a55; --ink:#f7d9ff;
  }
  @keyframes bgMove{ 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }

  .hud{ position:fixed; top:12px; left:12px; display:flex; gap:8px; z-index:9 }
  .pill{ border:none; border-radius:999px; padding:8px 12px; cursor:pointer; background:#fff; color:#7a0b2e; box-shadow:0 10px 25px rgba(0,0,0,.2) }
  body.night .pill{ background:#0f1533; color:#ffd1dc }

  .scene{ position:relative; width:min(92vw,520px); perspective:900px }
  .card{
    position:relative; background: rgba(255,255,255,.28);
    backdrop-filter: blur(14px); border-radius:28px; padding:24px 20px 22px;
    box-shadow: 0 30px 80px rgba(255, 40, 90, .35), inset 0 1px 0 rgba(255,255,255,.6);
    transform-style:preserve-3d; transition: transform .2s ease;
  }
  body.night .card{ background: rgba(20,24,60,.45); box-shadow: 0 30px 80px rgba(0,0,0,.45) }
  .glow{ position:absolute; inset:-1px; border-radius:28px; pointer-events:none; animation: glow 2.8s ease-in-out infinite }
  @keyframes glow{ 0%,100%{ box-shadow:0 0 0 0 rgba(255,111,145,.0)} 50%{ box-shadow:0 0 40px 8px rgba(255,111,145,.35)} }
  body.night .glow{ animation: none }

  .title{ color:var(--ink); font-size:clamp(1.9rem,3.8vw,2.6rem); text-align:center; margin:6px 0 8px }
  .subtitle{ color:color-mix(in srgb, var(--ink) 80%, #000 20%); text-align:center; opacity:.9; margin-bottom:8px }
  .progress{ display:flex; justify-content:center; gap:6px; margin-bottom:8px }
  .dot{ width:10px; height:10px; border-radius:50%; background:rgba(255,255,255,.6) }
  .dot.on{ background:#ff2f6d }

  .buttons{ position:relative; height:220px }
  .btn{
    position:absolute; border:none; border-radius:999px; padding:14px 38px; cursor:pointer;
    background: linear-gradient(#fff, #ffe8ef); color:#ff2f6d; font-size:1.05rem;
    box-shadow:0 10px 25px rgba(255, 50, 100, .35);
    transition: left .18s ease, top .18s ease, transform .12s ease, box-shadow .2s ease, filter .2s ease;
  }
  .btn:hover{ transform: translateY(-1px) scale(1.01); box-shadow: 0 16px 36px rgba(255, 50, 100, .45) }
  #yes{ left:70px; top:110px }
  #no { left:230px; top:110px; color:#9ca3af }
  .locked{ filter: grayscale(.7) blur(.3px); pointer-events:none }

  .hearts span,.petals span,.balloons span,.confetti i{ position:absolute; pointer-events:none }
  .hearts span{ font-size:18px; animation: rise 6s linear infinite }
  @keyframes rise{ to{ transform:translateY(-120vh) rotate(360deg); opacity:0 } }
  .petals span{ font-size:18px; animation: fall 6s linear infinite }
  @keyframes fall{ to{ transform:translateY(120vh) rotate(180deg); opacity:0 } }
  .balloons span{ font-size:22px; animation: balloon 8s linear infinite }
  @keyframes balloon{ to{ transform:translateY(-120vh); opacity:0 } }
  .confetti i{ width:8px; height:12px; background:#fff; animation: confetti 1.2s ease-out forwards }
  @keyframes confetti{ to{ transform:translateY(120px) rotate(180deg); opacity:0 } }

  canvas{ position:fixed; inset:0; pointer-events:none }

  .success{
    position:fixed; inset:0; display:grid; place-items:center; text-align:center; padding:24px;
    background: radial-gradient(circle at top, #ffd1dc, #ff9eb5 55%, #ff7aa2);
    color:#7a0b2e;
  }
  .box{
    background: rgba(255,255,255,.35); backdrop-filter: blur(12px);
    border-radius:28px; padding:26px 22px; box-shadow:0 30px 80px rgba(255, 40, 90, .35);
  }
  .actions{ display:flex; gap:10px; flex-wrap:wrap; justify-content:center; margin-top:16px }
</style>
</head>
<body>
<canvas id="fw"></canvas>

<div class="hud">
  <button class="pill" id="toggleNight">ðŸŒ™ Night</button>
  <button class="pill" data-theme="pink">ðŸ’– Pink</button>
  <button class="pill" data-theme="lav">ðŸ’œ Lavender</button>
  <button class="pill" data-theme="gal">ðŸŒŒ Galaxy</button>
</div>

<div class="scene">
  <div class="card" id="card">
    <div class="glow"></div>
    <div class="progress" id="progress">
      <span class="dot on"></span><span class="dot"></span><span class="dot"></span><span class="dot"></span>
    </div>
    <div class="subtitle" id="sub">Quick warm-up ðŸ’—</div>
    <h1 class="title" id="q">Do you like cute surprises? âœ¨</h1>
    <div class="buttons" id="arena">
      <button class="btn" id="yes">Yes ðŸ˜Š</button>
      <button class="btn" id="no">No ðŸ™ˆ</button>
    </div>
  </div>
</div>

<div class="hearts" id="hearts"></div>
<div class="petals" id="petals"></div>
<div class="balloons" id="balloons"></div>
<div class="confetti" id="confetti"></div>

<script>
  // Reset to beginning on refresh (no persistence used)
  let step = 0;

  // 3D tilt
  const card = document.getElementById('card');
  document.addEventListener('mousemove', e=>{
    const r = card.getBoundingClientRect();
    const cx = r.left + r.width/2, cy = r.top + r.height/2;
    const dx = (e.clientX - cx)/r.width, dy = (e.clientY - cy)/r.height;
    card.style.transform = `rotateY(${dx*10}deg) rotateX(${-dy*10}deg)`;
  });
  document.addEventListener('mouseleave', ()=> card.style.transform = 'rotateY(0) rotateX(0)');

  // Themes
  const themeBtns = document.querySelectorAll('[data-theme]');
  themeBtns.forEach(b=>b.onclick=()=>{
    const t=b.dataset.theme;
    if(t==='pink'){ document.body.style.setProperty('--bg1','#ff6f91'); document.body.style.setProperty('--bg2','#ff9eb5'); document.body.style.setProperty('--bg3','#ffd1dc'); }
    if(t==='lav'){ document.body.style.setProperty('--bg1','#b892ff'); document.body.style.setProperty('--bg2','#d8b4fe'); document.body.style.setProperty('--bg3','#fde2ff'); }
    if(t==='gal'){ document.body.style.setProperty('--bg1','#0b1026'); document.body.style.setProperty('--bg2','#141b3a'); document.body.style.setProperty('--bg3','#1f2a55'); }
  });
  document.getElementById('toggleNight').onclick=()=> document.body.classList.toggle('night');

  // Questions
  const questions = [
    "Do you like cute surprises? âœ¨",
    "Do you enjoy little romantic gestures? ðŸŒ¹",
    "Should we make more fun memories together? ðŸ’«",
    "Will you be my Valentine? ðŸ’–"
  ];
  const qEl=document.getElementById('q');
  const sub=document.getElementById('sub');
  const yes=document.getElementById('yes');
  const no=document.getElementById('no');
  const arena=document.getElementById('arena');
  const dots=[...document.querySelectorAll('.dot')];

  function clamp(v,min,max){ return Math.min(Math.max(v,min),max); }
  function moveNo(){
    const pad=8;
    const maxX = arena.clientWidth - no.offsetWidth - pad;
    const maxY = arena.clientHeight - no.offsetHeight - pad;
    const yR = yes.getBoundingClientRect();
    const aR = arena.getBoundingClientRect();
    const spots=[
      {x:(yR.left-aR.left)-no.offsetWidth-18, y:(yR.top-aR.top)},
      {x:(yR.right-aR.left)+18, y:(yR.top-aR.top)},
      {x:(yR.left-aR.left), y:(yR.top-aR.top)-no.offsetHeight-18},
      {x:(yR.left-aR.left), y:(yR.bottom-aR.top)+18}
    ];
    const p=spots[Math.floor(Math.random()*spots.length)];
    no.style.left = clamp(p.x,pad,maxX)+'px';
    no.style.top  = clamp(p.y,pad,maxY)+'px';
  }
  no.addEventListener('mouseover', moveNo);
  no.addEventListener('touchstart', moveNo, {passive:true});

  function updateUI(){
    qEl.textContent = questions[step];
    sub.textContent = step<3 ? "Just one more ðŸ˜‰" : "Final question ðŸ’˜";
    dots.forEach((d,i)=> d.classList.toggle('on', i<=step));
  }

  yes.addEventListener('click', ()=>{
    if(step < questions.length-1){
      step++; updateUI();
    } else showSuccess();
  });

  // Effects
  function spawn(container, char, dur){
    const s=document.createElement("span");
    s.textContent=char; s.style.left=Math.random()*100+"vw";
    container.appendChild(s); setTimeout(()=>s.remove(), dur);
  }
  setInterval(()=>spawn(document.getElementById('hearts'),"ðŸ’—",6000),400);
  setInterval(()=>spawn(document.getElementById('petals'),"ðŸŒ¸",6000),650);
  setInterval(()=>spawn(document.getElementById('balloons'),"ðŸŽˆ",8000),900);

  // Fireworks canvas
  const canvas=document.getElementById('fw'), ctx=canvas.getContext('2d');
  function resize(){ canvas.width=innerWidth; canvas.height=innerHeight } resize(); addEventListener('resize',resize);
  let rockets=[], particles=[];
  setInterval(()=>rockets.push({x:Math.random()*canvas.width,y:canvas.height,ty:Math.random()*canvas.height*0.5}),900);
  function loop(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    rockets.forEach((r,i)=>{
      r.y-=8; ctx.fillRect(r.x,r.y,2,2);
      if(r.y<r.ty){ for(let j=0;j<30;j++) particles.push({x:r.x,y:r.y,vx:(Math.random()-.5)*6,vy:(Math.random()-.5)*6,life:60,color:`hsl(${Math.random()*360},100%,60%)`}); rockets.splice(i,1); }
    });
    particles.forEach((p,i)=>{ p.x+=p.vx; p.y+=p.vy; p.life--; ctx.fillStyle=p.color; ctx.fillRect(p.x,p.y,3,3); if(p.life<=0) particles.splice(i,1); });
    requestAnimationFrame(loop);
  } loop();

  function showSuccess(){
    document.body.insertAdjacentHTML('beforeend', `
      <div class="success">
        <div class="box">
          <div id="typed"></div>
          <small>Soâ€¦ coffee sometime? â˜•ðŸ˜‰</small>
          <div class="actions">
            <button class="pill" onclick="alert('Tip: Take a screenshot ðŸ˜‰')">Save this moment ðŸ’—</button>
            <button class="pill" onclick="window.open('https://wa.me/?text='+encodeURIComponent('I just clicked YES on your Valentine page ðŸ’–'),'_blank')">Share ðŸ’Œ</button>
            <button class="pill" onclick="location.reload()">Replay ðŸ”„</button>
          </div>
        </div>
      </div>
    `);
    const msg="Yayyy! ðŸ’˜ You just made my day ðŸ˜";
    let i=0, t=document.getElementById('typed');
    const id=setInterval(()=>{ t.textContent+=msg[i++]||""; if(i>msg.length) clearInterval(id); },40);
  }
</script>
</body>
</html>
